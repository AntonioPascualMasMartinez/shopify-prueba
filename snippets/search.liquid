{%- doc -%}
  Renders the search action button.

  @param {string} [style] - The style of the search action.
  @param {string} [class] - Additional classes for the search action.
  @example
  {% render 'search', style: 'default', class: 'custom-class' %}
{%- enddoc -%}

{% unless style == 'none' %}
  
  <div class="search-action search-widget {% if class != blank %}{{ class | strip }}{% endif %}">
    <form method="get" action="{{ routes.search_url }}" style="width: 100%;">
      <div class="custom-search-wrapper">
        
        <button type="submit" class="custom-search-btn" aria-label="{{ 'content.search_input_label' | t }}">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#273488" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
        </button>

        <input type="hidden" name="type" value="product">
        
        <input 
          type="text" 
          name="q" 
          value="{{ search.terms | escape }}" 
          autocomplete="off" 
          autocorrect="off" 
          autocapitalize="off" 
          spellcheck="false" 
          placeholder="¿Qué estás buscando?" 
          class="custom-search-input"
        >
      </div>
    </form>
  </div>

  <style>
    /* Estilos visuales de tu diseño */
    .custom-search-wrapper {
      display: flex;
      align-items: center;
      background-color: #ffffff;
      border-radius: 90px; /* Borde de píldora */
      padding: 10px 20px;
      width: 100%;
      min-width: 250px; /* Evita que se haga muy pequeño */
    }

    .custom-search-btn {
      background: none;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      margin-right: 12px; /* Separación entre lupa y texto */
    }

    .custom-search-input {
      flex-grow: 1;
      border: none;
      background: transparent;
      outline: none;
      box-shadow: none;
      min-width: 0;
      color: #273488;
      font-family: inherit;
      font-size: 1rem;
    }

    /* Color del placeholder transparente */
    .custom-search-input::placeholder {
      color: rgba(39, 52, 136, 0.5); 
    }
  </style>
{% endunless %}

{% stylesheet %}
  /* Lógica original del tema para mostrar/ocultar en móvil y escritorio */
  .search-action {
    display: flex;
    align-items: center;
    width: 100%;
  }

  @media screen and (max-width: 749px) {
    .search-action--hidden-on-drawer {
      display: none;
    }
  }

  @media screen and (min-width: 750px) {
    [data-menu-style='drawer'] .search-action--hidden-on-drawer {
      display: none;
    }

    [data-menu-style='menu'] .search-action--hidden-on-menu {
      display: none;
    }
  }

  [data-menu-style='menu'] .header__column--left .search-action {
    @media screen and (min-width: 750px) {
      margin-inline: calc(var(--padding-lg) * -1);
    }
  }

  .header__column--right .search-action {
    @media screen and (min-width: 750px) {
      margin-inline: calc(var(--gap-md) * -1) calc(var(--gap-xs) * -1);
    }
  }
{% endstylesheet %}