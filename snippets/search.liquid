{%- doc -%}
  Renders the search action button.

  @param {string} [style] - The style of the search action.
  @param {string} [class] - Additional classes for the search action.
  @example
  {% render 'search', style: 'default', class: 'custom-class' %}
{%- enddoc -%}

{% unless style == 'none' %}
  <div class="search-action search-widget {% if class != blank %}{{ class | strip }}{% endif %}" style="width: 100%; max-width: 350px;">
    <form method="get" action="{{ routes.search_url }}" style="width: 100%;">
      <div class="input-group" style="display: flex; align-items: center; border: 1px solid var(--color-border); border-radius: var(--search-border-radius, 4px); padding: 4px 12px;">
        
        <input type="hidden" name="type" value="product">
        
        <input 
          type="text" 
          name="q" 
          value="{{ search.terms | escape }}" 
          autocomplete="off" 
          autocorrect="off" 
          autocapitalize="off" 
          spellcheck="false" 
          placeholder="¿Qué estás buscando?" 
          class="form-control form-search-control"
          style="flex-grow: 1; border: none; background: transparent; outline: none; box-shadow: none; min-width: 0;"
        >
        
        <button type="submit" class="search-btn" aria-label="{{ 'content.search_input_label' | t }}" style="background: none; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; padding: 4px; color: currentColor;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
        </button>
        
      </div>
    </form>
  </div>
{% endunless %}

{% stylesheet %}
  .search-action {
    --search-border-radius: var(--style-border-radius-inputs);
    --search-border-width: var(--style-border-width-inputs);

    display: flex;
    align-items: center;
  }

  @media screen and (max-width: 749px) {
    .search-action--hidden-on-drawer {
      display: none;
    }
  }

  @media screen and (min-width: 750px) {
    [data-menu-style='drawer'] .search-action--hidden-on-drawer {
      display: none;
    }

    [data-menu-style='menu'] .search-action--hidden-on-menu {
      display: none;
    }
  }

  [data-menu-style='menu'] .header__column--left .search-action {
    @media screen and (min-width: 750px) {
      margin-inline: calc(var(--padding-lg) * -1);
    }
  }

  .header__column--right .search-action {
    @media screen and (min-width: 750px) {
      margin-inline: calc(var(--gap-md) * -1) calc(var(--gap-xs) * -1);
    }
  }
{% endstylesheet %}